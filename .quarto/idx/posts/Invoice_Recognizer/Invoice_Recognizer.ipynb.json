{"title":"Hands Extracting Key-Value Pairs from Invoice Images using OCR and Gradio","markdown":{"headingText":"Hands Extracting Key-Value Pairs from Invoice Images using OCR and Gradio","containsRefs":false,"markdown":"\n\n\n\n**Introduction:**\n\nHave you ever been in a situation where you have a scanned copy of an invoice, but you need to extract certain key information from it? It can be a tedious task to manually go through the invoice and extract the information you need. That's where the Invoice Recognizer comes in handy. In this blog post, we will be discussing the implementation of the Invoice Recognizer using Python.\n\n**Objective:**\n\nThe objective of this project is to extract key-value pairs from an invoice image using the Tesseract OCR engine and regular expressions. We will be using Gradio to build a user interface for this project.\n\n**Implementation:**\n\nTo implement the Invoice Recognizer, we will be using the following libraries:\n\n\n\n*   Gradio: For building the user interface.\n*   pytesseract: For OCR (Optical Character Recognition).\n*   PIL (Python Imaging Library): For working with images.\n*   pandas: For displaying the output in a tabular format.\n\n\n\n**Background Information:**\n\n**Optical Character Recognition (OCR):**\nOptical Character Recognition, or OCR, is the process of converting scanned images of text into machine-encoded text that can be searched, indexed, and manipulated by a computer. OCR software is used to read the text from images and convert it into machine-readable text. OCR technology is used in many applications, such as digitizing books and documents, recognizing license plates, and scanning receipts.\n\n**Tesseract OCR:**\nTesseract OCR is a widely used open-source OCR engine developed by Google. It is known for its accuracy and ability to recognize text in a wide range of languages. Tesseract OCR is available in many programming languages, including Python.\n\n**Gradio:**\nGradio is a Python library that allows developers to quickly and easily create customizable UI components for their machine learning models. With Gradio, developers can create web interfaces for their models without needing to write any front-end code. Gradio is built on top of Flask and React, making it easy to integrate into existing Python projects.\nLet's start by installing the required libraries:\n\nOnce we have installed the required libraries, let's import them into our Python script:\n\n\n\nWe have imported the necessary libraries, and we have also specified the path to the Tesseract OCR engine. The next step is to define the regular expressions that we will use to match the keys in the invoice.\n\nThe function first splits the text into lines using the split method. It then iterates over the lines and matches each line against the regular expressions in key_regexes. When a match is found, it sets key to the corresponding key and initializes an empty string for the value in the kvp dictionary. It then continues to append the subsequent lines to the value until it finds the next key.\n\nThe function also includes a special case for the \"Amount Due (USD)\" key, since the value for this key is not on a separate line. It extracts the value using string manipulation and adds it to the kvp dictionary.\n\nFinally, the function removes any commas and replaces the key and colon from the value using the replace method.\n\nformat_table\nThe format_table function takes in a dictionary of key-value pairs and formats it as an HTML table using the Pandas library.\n\nThe function first creates a new dictionary (kvp) with stripped keys and values that have newlines replaced with commas. It then creates a Pandas dataframe with the dictionary and formats it as an HTML table using the to_html method. It returns the formatted table as a string.\n\n**extract_kvp_from_image**:\nThe extract_kvp_from_image function is the main function that takes in an image and a string of regular expressions, extracts the text from the image, and extracts the key-value pairs using the extract_kvp function. It then formats the output as an HTML table using the format_table function.\n\nNext, we define a function to extract text from the invoice image using the Tesseract OCR engine.\n\nAnd finally, we have the extract_kvp_from_image function. This function takes in an image and a string of regular expressions for the keys that we want to extract from the image. It then uses the extract_text_from_image function to extract the text from the image, and the extract_kvp function to extract the key-value pairs from the text using the provided regular expressions. Finally, the function formats the output as an HTML table using the format_table function and returns it.\n\nLet's put all the functions together and run the application!\n\n**Conclusion**:\n\nIn this blog post, we have explored how to extract key-value pairs from an invoice image using Python and Gradio. We have used the Tesseract OCR engine to extract text from the image, and regular expressions to extract the key-value pairs from the text. We have also used Gradio to create a user-friendly interface for our application.\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"jupyter"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"toc-depth":3,"output-file":"Invoice_Recognizer.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.335","editor":"visual","theme":"cosmo","title-block-banner":false,"author":"Lakshmi Putta","page-layout":"article"},"extensions":{"book":{"multiFile":true}}}}}